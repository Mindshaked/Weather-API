<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  <form id="locationForm">
    <label for="city">City or location:</label>
    <input type="text" id="city" name="city">
  </form>

  <button type="submit" form="locationForm" value="Submit">Submit</button>

  <div id="weather"> </div>
  <script>

const weather = document.getElementById("weather");


    async function getLocation(){

        const citySearch = "Barcelona";
        const response = await fetch('https://nominatim.openstreetmap.org/search?q=' + citySearch + '&format=json&addressdetails=1&limit=1&polygon_svg=1', {mode: 'cors'});
        const locationData = await response.json();
        const locationLatitude = locationData[0].lat;
        const locationLongitude = locationData[0].lon;
        return (locationLatitude, locationLongitude);
    }

    getLocation();

    async function getWeather(){
    
        const response = await fetch('https://api.open-meteo.com/v1/forecast?latitude=' + locationLatitude + '&longitude=' + locationLongitude + '&hourly=temperature_2m&current_weather=true', {mode: 'cors'});
        const weatherData = await response.json();
        weather.innerHTML = weatherData.current_weather.temperature;
    }

    getWeather();
  </script>
</body>
</html>